/**
* @pollyjs/persister-fs v5.0.0
*
* https://github.com/netflix/pollyjs
*
* Released under the Apache-2.0 License.
*/
'use strict';

function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var Persister = _interopDefault(require('@pollyjs/persister'));
var nodeServer = require('@pollyjs/node-server');

const {
  parse
} = JSON;
class FSPersister extends Persister {
  constructor() {
    super(...arguments);
    this.api = new nodeServer.API(this.options);
  }

  static get id() {
    return 'fs';
  }

  static get name() {
    // NOTE: deprecated in 4.1.0 but proxying since it's possible "core" is behind
    // and therefore still referencing `name`.  Remove in 5.0.0
    return this.id;
  }

  get defaultOptions() {
    return {
      recordingsDir: nodeServer.Defaults.recordingsDir
    };
  }

  findRecording(recordingId) {
    return this.api.getRecording(recordingId).body || null;
  }

  saveRecording(recordingId, data) {
    /*
      Pass the data through the base persister's stringify method so
      the output will be consistent with the rest of the persisters.
    */
    this.api.saveRecording(recordingId, parse(this.stringify(data)));
  }

  deleteRecording(recordingId) {
    this.api.deleteRecording(recordingId);
  }

}

module.exports = FSPersister;
//# sourceMappingURL=pollyjs-persister-fs.js.map
