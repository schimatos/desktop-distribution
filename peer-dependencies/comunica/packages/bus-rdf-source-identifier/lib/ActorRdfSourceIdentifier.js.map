{"version":3,"file":"ActorRdfSourceIdentifier.js","sourceRoot":"","sources":["ActorRdfSourceIdentifier.ts"],"names":[],"mappings":";;;AACA,yCAAuC;AAGvC;;;;;;;;;;GAUG;AACH,MAAsB,wBACpB,SAAQ,YAA8E;IAGtF,YAAmB,IAAmC;QACpD,KAAK,CAAC,IAAI,CAAC,CAAC;IACd,CAAC;IAIS,YAAY,CAAC,MAAkC;QACvD,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE;YAC1C,MAAM,IAAI,KAAK,CAAC,SAAS,IAAI,CAAC,IAAI,8CAA8C,CAAC,CAAC;SACnF;QACD,OAAO,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;IAChD,CAAC;CACF;AAhBD,4DAgBC","sourcesContent":["import type { IAction, IActorArgs, IActorOutput, IActorTest } from '@comunica/core';\nimport { Actor } from '@comunica/core';\nimport type { IMediatorTypePriority } from '@comunica/mediatortype-priority';\n\n/**\n * A comunica actor for rdf-source-identifier events.\n *\n * Actor types:\n * * Input:  IActionRdfSourceIdentifier:      The source value to discover the type of.\n * * Test:   <none>\n * * Output: IActorRdfSourceIdentifierOutput: The identified source type.\n *\n * @see IActionRdfSourceIdentifier\n * @see IActorRdfSourceIdentifierOutput\n */\nexport abstract class ActorRdfSourceIdentifier\n  extends Actor<IActionRdfSourceIdentifier, IActorTest, IActorRdfSourceIdentifierOutput> {\n  public readonly priority: number;\n\n  public constructor(args: IActorRdfSourceIdentifierArgs) {\n    super(args);\n  }\n\n  public abstract test(action: IActionRdfSourceIdentifier): Promise<IMediatorTypePriority>;\n\n  protected getSourceUrl(action: IActionRdfSourceIdentifier): string {\n    if (!action.sourceValue.startsWith('http')) {\n      throw new Error(`Actor ${this.name} can only detect sources hosted via HTTP(S).`);\n    }\n    return action.sourceValue.replace(/#.*/u, '');\n  }\n}\n\nexport interface IActionRdfSourceIdentifier extends IAction {\n  /**\n   * The provided source value in the context.\n   */\n  sourceValue: string;\n}\n\nexport interface IActorRdfSourceIdentifierOutput extends IActorOutput {\n  /**\n   * The identified source type.\n   */\n  sourceType: string;\n}\n\nexport interface IActorRdfSourceIdentifierArgs\n  extends IActorArgs<IActionRdfSourceIdentifier, IActorTest, IActorRdfSourceIdentifierOutput> {\n  priority: number;\n}\n"]}